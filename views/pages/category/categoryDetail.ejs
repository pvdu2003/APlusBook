<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Login Form</title>
    <%- include('../../partials/main') %>
  </head>
  <% if (typeof err === 'undefined') err = {}; %>
  <body>
    <%- include('../../partials/header') %>
    <div class="container text-center d-flex flex-row mt-4">
      <div class="col-2 text-start">
        <ul class="list-group list-group-flush">
          <div
            class="d-flex flex-row justify-content-between align-items-center"
            data-bs-toggle="collapse"
            data-bs-target="#category"
            aria-expanded="false"
            aria-controls="category"
          >
            <h5 class="mt-3">Category</h5>
            <i class="fas fa-chevron-down p-2"></i>
          </div>
          <div class="collapse" id="category">
            <li class="list-group-item">
              <a class="dropdown-item" href="/book/list"> All Categories </a>
            </li>
            <% categories.forEach(function(cat) { %> <% if (category && cat.id
            == category.id) { %>
            <li class="list-group-item text-main">
              <a class="dropdown-item" href="/category/<%=cat.id%>"
                ><%=cat.name%></a
              >
            </li>
            <% } else { %>
            <li class="list-group-item">
              <a class="dropdown-item" href="/category/<%=cat.id%>"
                ><%=cat.name%></a
              >
            </li>
            <% }}); %>
          </div>
        </ul>
      </div>
      <div class="col-10 ps-5">
        <div class="d-flex flex-wrap">
          <% books.forEach(function(book) { %>

          <div class="card mb-2 mx-1 col-3" style="width: 12rem; height: 16rem">
            <a href="/book/<%= book._id %>"
              ><img
                src="<%= book.image %>"
                class="card-img-top mb-0 img-thumbnail"
                alt="Book Image"
                style="height: 12rem"
            /></a>
            <div
              class="card-body pb-1 mt-2 mx-2"
              style="padding: 0px !important"
            >
              <a
                href="/book/<%= book._id %>"
                class="text-decoration-none text-dark"
              >
                <h5
                  class="card-title fs-6 text-start fw-bold text-truncate ps-0 my-0"
                >
                  <%= book.title %>
                </h5>
              </a>
              <div class="d-flex justify-content-between align-items-center">
                <p class="card-text text-main fs-6 fw-bold">
                  <%= book.price %>$
                </p>
                <p style="font-size: 14px">Sold: <%= book.quantity_sold %></p>
              </div>
            </div>
          </div>
          <%}) %>
        </div>
      </div>
    </div>
  </body>
</html>
